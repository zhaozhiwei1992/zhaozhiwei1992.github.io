<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhaozhiwei1992.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="show me your code">
<meta property="og:type" content="website">
<meta property="og:title" content="离线de日常">
<meta property="og:url" content="http://zhaozhiwei1992.github.io/page/2/index.html">
<meta property="og:site_name" content="离线de日常">
<meta property="og:description" content="show me your code">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Mr.zhao">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://zhaozhiwei1992.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>离线de日常</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">离线de日常</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2025/01/21/%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93%E6%90%AD%E5%BB%BA-DIFY/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/01/21/%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93%E6%90%AD%E5%BB%BA-DIFY/" class="post-title-link" itemprop="url">搭建个人AI知识库-DIFY</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-01-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-01-21T00:00:00+08:00">2025-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-13 19:55:43" itemprop="dateModified" datetime="2025-03-13T19:55:43+08:00">2025-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI%EF%BC%8C%E8%BD%AF%E4%BB%B6%EF%BC%8C%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">AI，软件，工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h1><p>本地目前没有显卡，只能用cpu刚。</p>
<p>如果不想自己搭建本地模型，完全可以掏钱使用现成的API即可。</p>
<p>需要了解一些docker知识</p>
<h1 id="搭建本地模型"><a href="#搭建本地模型" class="headerlink" title="搭建本地模型"></a>搭建本地模型</h1><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><h3 id="os-archlinux"><a href="#os-archlinux" class="headerlink" title="os: archlinux"></a>os: archlinux</h3><h3 id="内存-32g"><a href="#内存-32g" class="headerlink" title="内存: 32g"></a>内存: 32g</h3><h3 id="cpu-6核12线程"><a href="#cpu-6核12线程" class="headerlink" title="cpu: 6核12线程"></a>cpu: 6核12线程</h3><h3 id="docker-27-3-1"><a href="#docker-27-3-1" class="headerlink" title="docker: 27.3.1"></a>docker: 27.3.1</h3><h3 id="docker-compose-2-32-4"><a href="#docker-compose-2-32-4" class="headerlink" title="docker-compose: 2.32.4"></a>docker-compose: 2.32.4</h3><h2 id="ollama"><a href="#ollama" class="headerlink" title="ollama"></a>ollama</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ollama</span><br><span class="line"></span><br><span class="line">systemctl start ollama.service</span><br><span class="line"></span><br><span class="line"> # 通过下述url判断ollama是否安装成功</span><br><span class="line">http://127.0.0.1:11434/</span><br></pre></td></tr></table></figure>
<h2 id="LLM模型-qwen2-1-5b"><a href="#LLM模型-qwen2-1-5b" class="headerlink" title="LLM模型 (qwen2:1.5b)"></a>LLM模型 (qwen2:1.5b)</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama pull qwen2:1.5b</span><br></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama run qwen2:1.5b</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ollama run qwen2:1.5b</span><br><span class="line">&gt;&gt;&gt; who are you?</span><br><span class="line">I am an AI language model, designed to answer questions and provide information on various topics. How can I assist you today?</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; Send a message (/? for help)</span><br></pre></td></tr></table></figure>
<h2 id="Text-Embedding模型-m3e"><a href="#Text-Embedding模型-m3e" class="headerlink" title="Text Embedding模型 (m3e)"></a>Text Embedding模型 (m3e)</h2><h3 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ollama pull milkey/m3e</span><br><span class="line"></span><br><span class="line">embedding模型不需要run, ollama服务启动可直接使用</span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl http://127.0.0.1:11434/api/embed -d &#x27;&#123;</span><br><span class="line">  &quot;model&quot;: &quot;milkey/m3e&quot;,</span><br><span class="line">  &quot;input&quot;: &quot;balabalabala&quot;</span><br><span class="line">&#125;&#x27; | jq .</span><br></pre></td></tr></table></figure>
<h2 id="查看模型运行情况"><a href="#查看模型运行情况" class="headerlink" title="查看模型运行情况"></a>查看模型运行情况</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ollama ps</span><br><span class="line"></span><br><span class="line">NAME                        ID              SIZE      PROCESSOR    UNTIL    </span><br><span class="line">qwen2:1.5b                  f6daf2b25194    1.5 GB    100% CPU     4 minutes from now</span><br><span class="line">milkey/m3e:latest           1477f12451b0    860 MB    100% CPU     4 minutes from now</span><br></pre></td></tr></table></figure>
<h1 id="构建知识库-ollama-DIFY"><a href="#构建知识库-ollama-DIFY" class="headerlink" title="构建知识库(ollama+DIFY)"></a>构建知识库(ollama+DIFY)</h1><h2 id="下载启动dify"><a href="#下载启动dify" class="headerlink" title="下载启动dify"></a>下载启动dify</h2><p>参考官方文档，so easy!</p>
<p><a target="_blank" rel="noopener" href="https://docs.dify.ai/zh-hans/getting-started/install-self-hosted/docker-compose">https://docs.dify.ai/zh-hans/getting-started/install-self-hosted/docker-compose</a></p>
<p>本地采用的是 #systemd方式* 部署。这里一定要注意，不同的部署方式网络配置有点区别，比如systemd的方式服务启动需要增加环境变量OLLAMA_HOST，而对于docker启动方式，可以参考官方文档(暂未测试)</p>
<h2 id="添加模型"><a href="#添加模型" class="headerlink" title="添加模型"></a>添加模型</h2><p>这里我们需要两个模型，一个LLM，一个Text Embedding</p>
<h3 id="qwen2-1-5b模型添加"><a href="#qwen2-1-5b模型添加" class="headerlink" title="qwen2:1.5b模型添加"></a>qwen2:1.5b模型添加</h3><p>模型名称：qwen2:1.5b（必须完整填写）</p>
<p>基础 URL：http://<your-ollama-endpoint-domain>:11434 (这里的ip要是你本地ip,不能用localhost，127这些。本地是<a target="_blank" rel="noopener" href="http://10.10.15.159:11434/">http://10.10.15.159:11434</a>)</p>
<p>模型类型：对话</p>
<p>模型上下文长度：4096 (模型的最大上下文长度，若不清楚可填写默认值 4096)</p>
<p>最大 token 上限：4096 (模型返回内容的最大 token 数量，若模型无特别说明，则可与模型上下文长度保持一致)</p>
<p>是否支持 Vision：是</p>
<p>保存即可使用</p>
<p><img src="https://s2.loli.net/2025/01/21/XtlN3fowajFcrY2.png" alt="screenshot_x3ym8s_000.png"></p>
<h3 id="milkey-m3e-latest"><a href="#milkey-m3e-latest" class="headerlink" title="milkey/m3e:latest"></a>milkey/m3e:latest</h3><p>模型名称：milkey/m3e:latest (同上)</p>
<p>基础 URL：http://<your-ollama-endpoint-domain>:11434 (这里的ip要是你本地ip,不能用localhost，127这些。本地是<a target="_blank" rel="noopener" href="http://10.10.15.159:11434/">http://10.10.15.159:11434</a>)</p>
<p>模型上下文长度：4096</p>
<p>保存即可使用</p>
<h3 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h3><h2 id="创建知识库"><a href="#创建知识库" class="headerlink" title="创建知识库"></a>创建知识库</h2><p>导入数据 –&gt; 设置分段 –&gt;设置索引及检索</p>
<p>对于word这种格式化的数据,分段模式最好使用 #父子模式* ; 索引方式使用高质量模式，使用上述m3e模型来生成索引数据。</p>
<p><img src="https://s2.loli.net/2025/01/21/MxvKOBUuGg1EJC8.png" alt="screenshot_zSwzzS_000.png"></p>
<h1 id="创建聊天助手"><a href="#创建聊天助手" class="headerlink" title="创建聊天助手"></a>创建聊天助手</h1><p>知识库是没法直接去使用的，顶多能做个召回测试。这里我们创建一个聊天助手，可以关联知识库，这样能真正使用。</p>
<p>聊天助手创建很简单，可以选择顶部工作室 -&gt; 创建空白应用</p>
<p><img src="https://s2.loli.net/2025/01/21/D1xUA3iM4tLTchw.png" alt="screenshot_UWVTYt_000.png"></p>
<p>选择已经创建好的知识库</p>
<p><img src="https://s2.loli.net/2025/01/21/hFE8kuyQ7qBNs52.png" alt="screenshot_NnXWmT_000.png"></p>
<p>应用发布即可</p>
<h2 id="直接通过dify使用"><a href="#直接通过dify使用" class="headerlink" title="直接通过dify使用"></a>直接通过dify使用</h2><p>dify默认启动使用的是80端口，可以直接通过<a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> 访问(首次使用需要注册用户密码)。 然后选择探索，选择我们刚刚创建的聊天助手就可以开始愉快的聊天了。</p>
<p><img src="https://s2.loli.net/2025/01/21/lnJCkKOuqLHadoE.png" alt="screenshot_vq0gwR_000.png"></p>
<p><img src="https://s2.loli.net/2025/01/21/mCRV8dXSBoZTJbY.png" alt="screenshot_dhJZif_000.png"></p>
<h2 id="将dify嵌入到自己的应用中"><a href="#将dify嵌入到自己的应用中" class="headerlink" title="将dify嵌入到自己的应用中"></a>将dify嵌入到自己的应用中</h2><p>可以通过api、iframe之类的方式将自己搭建的聊天助手嵌入到系统中(需要有开发能力，很简单)。</p>
<h2 id="知识库工作流"><a href="#知识库工作流" class="headerlink" title="知识库工作流"></a>知识库工作流</h2><p><img src="https://s2.loli.net/2025/01/21/O6FTmeAgRG5brck.png" alt="screenshot_pMpzgp_000.png"></p>
<h1 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h1><h2 id="dify访问时提示11434拒绝"><a href="#dify访问时提示11434拒绝" class="headerlink" title="dify访问时提示11434拒绝"></a>dify访问时提示11434拒绝</h2><p><a target="_blank" rel="noopener" href="http://10.10.15.159:11434/">http://10.10.15.159:11434/</a> 请求失败</p>
<h3 id="处理"><a href="#处理" class="headerlink" title="处理"></a>处理</h3><p>检查服务启动正常，需要在service中增加环境变量 Environment=”OLLAMA_HOST=0.0.0.0:11434”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/lib/systemd/system/ollama.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart ollama.service</span><br></pre></td></tr></table></figure>

<p>其它系统类似，就是让服务启动读取到该变量即可</p>
<h2 id="Reached-maximum-retries-3-for-URL-http-localhost-8090-api-system-ext-examples-echo"><a href="#Reached-maximum-retries-3-for-URL-http-localhost-8090-api-system-ext-examples-echo" class="headerlink" title="Reached maximum retries (3) for URL http://localhost:8090/api/system/ext/examples/echo"></a>Reached maximum retries (3) for URL <a target="_blank" rel="noopener" href="http://localhost:8090/api/system/ext/examples/echo">http://localhost:8090/api/system/ext/examples/echo</a></h2><h3 id="分析处理"><a href="#分析处理" class="headerlink" title="分析处理"></a>分析处理</h3><p>添加工具后，访问本地接口提示上述错误, 其实还是ip的问题，这里使用本地ip,如10.10.15.159。因为dify部署在容器中,localhost有特殊意义</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/12/31/%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90-telegram%E6%B6%88%E6%81%AF%E6%8F%90%E9%86%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/31/%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90-telegram%E6%B6%88%E6%81%AF%E6%8F%90%E9%86%92/" class="post-title-link" itemprop="url">好物推荐-telegram消息提醒</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-31 00:00:00" itemprop="dateCreated datePublished" datetime="2024-12-31T00:00:00+08:00">2024-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-02-27 00:06:39" itemprop="dateModified" datetime="2025-02-27T00:06:39+08:00">2025-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BD%AF%E4%BB%B6%EF%BC%8C%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">软件，工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么是telegram"><a href="#什么是telegram" class="headerlink" title="什么是telegram"></a>什么是telegram</h1><p>Telegram Messenger, commonly known as Telegram, is a cloud-based, cross-platform, social media and instant messaging (IM) service</p>
<p>Telegram Messenger，通常简称为Telegram，是一款基于云的、跨平台的社交媒体和即时通讯(IM)服务。</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>日常生活中有一些动态的提醒，比如说服务器故障，或者找到了一些有意思的内容，我们需要有一种手段可以直接通知。理想情况下，如果能直接通知到微信会更好，但目前似乎没有既安全又好用的方法来实现这一点。。虽然钉钉提供了机器人的方式(需要有群组)，但是除了工作800年不会打开。所以借这次机会正好玩下telegram的机器人。</p>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><h2 id="python3-x"><a href="#python3-x" class="headerlink" title="python3.x"></a>python3.x</h2><h2 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h2><h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><h2 id="创建一个机器人"><a href="#创建一个机器人" class="headerlink" title="创建一个机器人"></a>创建一个机器人</h2><p>在botfather中输入/newbot, 按照提示创建一个机器人。创建后会返回一段内容包括机器人的tokenid。</p>
<h2 id="获取要通知用户的chat-id"><a href="#获取要通知用户的chat-id" class="headerlink" title="获取要通知用户的chat_id"></a>获取要通知用户的chat_id</h2><p>搜索添加机器人 @get_id_bot，私聊发送命令 /my_id，如下图，会返回你的id信息</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf8 -*-</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date, datetime</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> telegram <span class="keyword">import</span> Bot</span><br><span class="line"><span class="keyword">from</span> telegram.utils.request <span class="keyword">import</span> Request</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">...</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_telegram_message</span>(<span class="params">msg</span>):</span><br><span class="line">    <span class="comment"># 替换为你的API令牌</span></span><br><span class="line">    token = os.environ[<span class="string">&#x27;TELEGRAM_TOKEN&#x27;</span>]</span><br><span class="line">    <span class="comment"># 替换为你的Telegram账号的ID</span></span><br><span class="line">    chat_id = os.environ[<span class="string">&#x27;TELEGRAM_CHAT_ID&#x27;</span>]</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    python 3.x</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    proxy = Request(proxy_url=<span class="string">&#x27;http://127.0.0.1:7890&#x27;</span>)</span><br><span class="line">    bot = Bot(token=token, request=proxy)</span><br><span class="line">    bot.send_message(chat_id=chat_id, text=msg)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>按照上述步骤即可实现将msg信息发送给机器人。所以理论上你可以创建很多个机器人，分别做不同类型的通知，enjoy！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/10/18/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAAI%E7%9F%A5%E8%AF%86%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/10/18/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAAI%E7%9F%A5%E8%AF%86%E5%BA%93/" class="post-title-link" itemprop="url">搭建个人AI知识库：RAG与本地模型实践指南</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-10-18 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-18T00:00:00+08:00">2024-10-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-02-27 00:06:39" itemprop="dateModified" datetime="2025-02-27T00:06:39+08:00">2025-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI%EF%BC%8C%E8%BD%AF%E4%BB%B6%EF%BC%8C%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">AI，软件，工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>你是否想过拥有一个私人订制的AI助手，能够随时为你提供最个性化的信息？本文将带你一步步搭建一个基于本地模型和RAG技术的个人知识库。</p>
<h1 id="搭建本地模型"><a href="#搭建本地模型" class="headerlink" title="搭建本地模型"></a>搭建本地模型</h1><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul>
<li>os: archlinux</li>
<li>内存: 32g</li>
<li>cpu: 6核12线程</li>
<li>python: 3.12.7</li>
<li>docker27.3.1 + docker-compose</li>
<li>向量库: milvus2.4.13 + attu2.4(客户端)<h2 id="ollama"><a href="#ollama" class="headerlink" title="ollama"></a>ollama</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ollama</span><br><span class="line"></span><br><span class="line">systemctl start ollama.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过下述url判断ollama是否安装成功</span></span><br><span class="line">http://127.0.0.1:11434/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="llama3-2-3b"><a href="#llama3-2-3b" class="headerlink" title="llama3.2:3b"></a>llama3.2:3b</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama run llama3.2:3b</span><br></pre></td></tr></table></figure>
<h2 id="OpenWebUI-非必须"><a href="#OpenWebUI-非必须" class="headerlink" title="OpenWebUI(非必须)"></a>OpenWebUI(非必须)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动openwebui, 按照自己需要调整端口</span></span><br><span class="line">docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui ghcr.io/open-webui/open-webui:main</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">浏览器访问, 可以看到之前启动的模型</span></span><br><span class="line">http://localhost:3000/</span><br></pre></td></tr></table></figure>
<h2 id="程序访问测试"><a href="#程序访问测试" class="headerlink" title="程序访问测试"></a>程序访问测试</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> ChatOllama</span><br><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> HumanMessage</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建ChatOllama实例，指定模型名称</span></span><br><span class="line">model = ChatOllama(model=<span class="string">&quot;llama3.2:3b&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义你的问题</span></span><br><span class="line">question = HumanMessage(<span class="string">&quot;你是如何工作的？&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用模型处理问题</span></span><br><span class="line">response = model.invoke([question])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印返回的结果</span></span><br><span class="line"><span class="built_in">print</span>(response.content)</span><br></pre></td></tr></table></figure>
<h1 id="构建知识库"><a href="#构建知识库" class="headerlink" title="构建知识库"></a>构建知识库</h1><h2 id="RAG是什么"><a href="#RAG是什么" class="headerlink" title="RAG是什么"></a>RAG是什么</h2>大模型的训练数据是有截止日期的，那当我们需要依靠不包含在大模型训练集中的数据时，我们该怎么做呢？一种就是对模型进行微调，另外就是通过检索增强生成RAG（Retrieval Augmented Generation）。在这个过程中，首先检索外部数据，然后在生成步骤中将这些数据传递给LLM。</li>
</ul>
<p>利用大模型的能力搭建知识库就是一个RAG技术的应用。</p>
<h3 id="RAG的应用抽象为5个过程："><a href="#RAG的应用抽象为5个过程：" class="headerlink" title="RAG的应用抽象为5个过程："></a>RAG的应用抽象为5个过程：</h3><ul>
<li>文档加载（Document Loading） ：从多种不同来源加载文档。LangChain提供了100多种不同的文档加载器，包括PDF在内的非结构化的数据、SQL在内的结构化的数据，以及Python、Java之类的代码等</li>
<li>文本分割（Splitting） ：文本分割器把Documents 切分为指定大小的块，我把它们称为“文档块”或者“文档片”</li>
<li>存储（Storage）： 存储涉及到两个环节，分别是：<ol>
<li>将切分好的文档块进行嵌入（Embedding）转换成向量的形式</li>
<li>将Embedding后的向量数据存储到向量数据库</li>
</ol>
</li>
<li>检索（Retrieval） ：一旦数据进入向量数据库，我们仍然需要将数据检索出来，我们会通过某种检索算法找到与输入问题相似的嵌入片</li>
<li>输出（Output） ：把问题以及检索出来的嵌入片一起提交给LLM，LLM会通过问题和检索出来的提示一起来生成更加合理的答案<h2 id="个人笔记"><a href="#个人笔记" class="headerlink" title="个人笔记"></a>个人笔记</h2>首先起码得有自己的知识库，我这里就是个人多年整理的笔记。或者你有项目相关的文档，也可以作为知识库的基础。<h2 id="将个人笔记写入到Milvus"><a href="#将个人笔记写入到Milvus" class="headerlink" title="将个人笔记写入到Milvus"></a>将个人笔记写入到Milvus</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> DirectoryLoader</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> Milvus</span><br><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> OllamaEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> pymilvus <span class="keyword">import</span> MilvusClient</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查collection是否存在, 如果不指定，默认为LangChainCollection</span></span><br><span class="line">collection_name = <span class="string">&quot;note&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 Milvus 客户端</span></span><br><span class="line">client = MilvusClient(uri=<span class="string">&quot;http://localhost:19530&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查collection是否存在</span></span><br><span class="line"><span class="keyword">if</span> client.has_collection(collection_name):</span><br><span class="line">    <span class="comment"># collection存在，执行后续操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Collection &#x27;<span class="subst">&#123;collection_name&#125;</span>&#x27; exists.&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># collection不存在，创建collection并进行向量化</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Collection &#x27;<span class="subst">&#123;collection_name&#125;</span>&#x27; does not exist. Creating now...&quot;</span>)</span><br><span class="line">    <span class="comment"># 从url导入知识作为聊天背景上下文, glob代表只查找org文件，可根据实际情况调整为txt等，recursive=True表示会递归查找</span></span><br><span class="line">    loader = DirectoryLoader(os.path.join(os.environ[<span class="string">&quot;HOME&quot;</span>], <span class="string">&quot;Documents/notes&quot;</span>), glob=<span class="string">&quot;*.org&quot;</span>, recursive=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 加载一堆文件</span></span><br><span class="line">    docs = loader.load()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文本分词器</span></span><br><span class="line">    <span class="comment"># chunk_size=1000</span></span><br><span class="line">    <span class="comment"># 表示拆分的文档的大小，也就是上面所说的要设置为多少合适取决于所使用LLM 的窗口大小</span></span><br><span class="line">    <span class="comment"># chunk_overlap=100</span></span><br><span class="line">    <span class="comment"># 这个参数表示每个拆分好的文档重复多少个字符串。</span></span><br><span class="line">    <span class="comment"># 不过这种递归的方式更只能点，不设参数试试默认</span></span><br><span class="line">    text_splitter = RecursiveCharacterTextSplitter()</span><br><span class="line">    documents = text_splitter.split_documents(docs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ollama嵌入层</span></span><br><span class="line">    embeddings = OllamaEmbeddings(</span><br><span class="line">        model=<span class="string">&quot;llama3.2:3b&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文档向量化，会持久化</span></span><br><span class="line">    vector_store = Milvus.from_documents(documents=documents, embedding=embeddings, collection_name=collection_name, drop_old=<span class="literal">True</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;collection&#x27;<span class="subst">&#123;collection_name&#125;</span>&#x27;创建成功!&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
注: 上述加载文件的目录需要根据自己实际情况调整，其它的最好用默认，减少出错概率<h2 id="将llm与Milvus结合"><a href="#将llm与Milvus结合" class="headerlink" title="将llm与Milvus结合"></a>将llm与Milvus结合</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_retrieval_chain</span><br><span class="line"><span class="keyword">from</span> langchain.chains.combine_documents <span class="keyword">import</span> create_stuff_documents_chain</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> Milvus</span><br><span class="line"><span class="keyword">from</span> langchain_core.output_parsers <span class="keyword">import</span> StrOutputParser</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> OllamaEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_ollama <span class="keyword">import</span> OllamaLLM</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> pymilvus <span class="keyword">import</span> MilvusClient</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exec</span>(<span class="params">question</span>):</span><br><span class="line">    <span class="comment"># 检查collection是否存在</span></span><br><span class="line">    collection_name = <span class="string">&quot;note&quot;</span></span><br><span class="line">    <span class="comment"># 设置 Milvus 客户端</span></span><br><span class="line">    client = MilvusClient(uri=<span class="string">&quot;http://localhost:19530&quot;</span>)</span><br><span class="line">    vector_store = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># 检查collection是否存在</span></span><br><span class="line">    <span class="keyword">if</span> client.has_collection(collection_name):</span><br><span class="line">        <span class="comment"># collection存在，执行后续操作</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Collection &#x27;<span class="subst">&#123;collection_name&#125;</span>&#x27; exists.&quot;</span>)</span><br><span class="line">        <span class="comment"># 文本分词器</span></span><br><span class="line">        text_splitter = RecursiveCharacterTextSplitter()</span><br><span class="line">        documents = text_splitter.split_documents([])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ollama嵌入层</span></span><br><span class="line">        embeddings = OllamaEmbeddings(</span><br><span class="line">            model=<span class="string">&quot;llama3.2:3b&quot;</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># 文档向量化</span></span><br><span class="line">        vector_store = Milvus.from_documents(documents=documents, embedding=embeddings, collection_name=collection_name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># collection不存在，创建collection并进行向量化</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Collection &#x27;<span class="subst">&#123;collection_name&#125;</span>&#x27; does not exist. Please exec LoadFile2Vector.py first&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> vector_store <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># 创建ollama 模型 llama2</span></span><br><span class="line">        llm = OllamaLLM(model=<span class="string">&quot;llama3.2:3b&quot;</span>)</span><br><span class="line">        output_parser = StrOutputParser()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 创建提示词模版</span></span><br><span class="line">        prompt = ChatPromptTemplate.from_template(</span><br><span class="line">            <span class="string">&quot;&quot;&quot;Answer the following question based only on the provided context:</span></span><br><span class="line"><span class="string">            &lt;context&gt;</span></span><br><span class="line"><span class="string">            &#123;context&#125;</span></span><br><span class="line"><span class="string">            &lt;/context&gt;</span></span><br><span class="line"><span class="string">            Question: &#123;input&#125;&quot;&quot;&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 生成chain ：   prompt | llm</span></span><br><span class="line">        document_chain = create_stuff_documents_chain(llm, prompt)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 向量数据库检索器</span></span><br><span class="line">        retriever = vector_store.as_retriever()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 向量数据库检索chain :  vector | prompt | llm</span></span><br><span class="line">        retrieval_chain = create_retrieval_chain(retriever, document_chain)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 调用上面的 (向量数据库检索chain)</span></span><br><span class="line">        response = retrieval_chain.invoke(&#123;<span class="string">&quot;input&quot;</span>: question&#125;)</span><br><span class="line">        <span class="comment"># 打印结果</span></span><br><span class="line">        <span class="built_in">print</span>(response[<span class="string">&quot;answer&quot;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">exec</span>(<span class="string">&quot;我有什么梦想? 如何实现&quot;</span>)</span><br></pre></td></tr></table></figure>
大致的流程是：用户的query先转成embedding，去向量数据库查询最接近的top K回答；然后这query + top K的回答 + 其他context一起进入LLM，让LLM整合上述所有的信息后给出最终的回复。<h2 id="提供接口-非必须"><a href="#提供接口-非必须" class="headerlink" title="提供接口(非必须)"></a>提供接口(非必须)</h2>可通过fastapi等提供restful接口供外部调用，比如一些个人项目公司内部项目之类的，瞬间高大上起来了。</li>
</ul>
<h1 id="项目源码"><a href="#项目源码" class="headerlink" title="项目源码"></a>项目源码</h1><p><a target="_blank" rel="noopener" href="https://github.com/zhaozhiwei1992/NoteAI.git">https://github.com/zhaozhiwei1992/NoteAI.git</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/AAI666666/article/details/137509781">https://blog.csdn.net/AAI666666/article/details/137509781</a></p>
<p><a target="_blank" rel="noopener" href="https://ollama.com/library">https://ollama.com/library</a></p>
<p>文本向量转换: <a target="_blank" rel="noopener" href="https://github.com/shibing624/text2vec">https://github.com/shibing624/text2vec</a></p>
<p>文本存储: <a target="_blank" rel="noopener" href="https://juejin.cn/post/7360564568660410377">https://juejin.cn/post/7360564568660410377</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/10/15/%E8%B5%9A%E9%92%B1%E5%B7%A5%E5%85%B7%E9%A1%B9%E7%9B%AE%E6%8E%A8%E5%B9%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/10/15/%E8%B5%9A%E9%92%B1%E5%B7%A5%E5%85%B7%E9%A1%B9%E7%9B%AE%E6%8E%A8%E5%B9%BF/" class="post-title-link" itemprop="url">分享一个前后端分离后台管理系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-10-15 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-15T00:00:00+08:00">2024-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">编程</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>分享一个前后端分离的后台管理系统，技术栈较新，适合喜欢倒腾的朋友。</p>
<p>地址: <a target="_blank" rel="noopener" href="https://github.com/zhaozhiwei1992/money-making-machine-plus.git">https://github.com/zhaozhiwei1992/money-making-machine-plus.git</a></p>
<p>喜欢的朋友，点点star</p>
<h1 id="项目描述"><a href="#项目描述" class="headerlink" title="项目描述"></a>项目描述</h1><p>一个前后端分离的后台管理系统， 基于springboot3.3.3+vue3.3.4+mysql8， 代码结构清晰，注释友好，使用最新的前后端开发技术，适合想要尝鲜的道友。</p>
<p>项目参考了jhipster的优秀代码设计，ruoyi项目的目录接口， 分模块开发， 感谢以上开源项目。</p>
<p>目前处于开发阶段，有问题提issue，后续会继续完善。如果动手能力强的朋友，可以直接参与开发，一起完善这个项目。</p>
<p>为什么叫赚钱工具？字面意思，因为真的很穷。</p>
<h1 id="体验地址"><a href="#体验地址" class="headerlink" title="体验地址"></a>体验地址</h1><p><a target="_blank" rel="noopener" href="http://43.143.194.245:8091/index.html">http://43.143.194.245:8091/index.html</a> (无了，暂时没钱搞服务器:D)</p>
<p>用户/密码: admin/admin</p>
<h1 id="项目特点"><a href="#项目特点" class="headerlink" title="项目特点"></a>项目特点</h1><p>代码注释友好， 实现简单， 便于阅读， 推荐二次开发</p>
<p>前后端分离，使用 token 认证</p>
<p>支持RBAC权限模型， 支持菜单及按钮权限控制， 动态显示及后端严格权限控制</p>
<p>支持角色+菜单的数据权限控制， 按照规则配置好后，程序自动控制</p>
<p>前端采用 Vue3.x + element-plus-admin， 数据绑定代码简单，提高开发效率</p>
<p>使用 liquibase 进行数据库版本控制， 空库只需创建数据库然后启动服务即可</p>
<p>使用 quartz 定时任务，可动态完成任务的添加、修改、删除、暂停、恢复及日志查看等功能</p>
<p>使用 swagger 查看或测试后端接口</p>
<p>使用 jpa 做数据库操作， 理论上支持大部分关系数据库</p>
<p>同步支持移动端小程序</p>
<h1 id="功能模块"><a href="#功能模块" class="headerlink" title="功能模块"></a>功能模块</h1><h2 id="基础数据"><a href="#基础数据" class="headerlink" title="基础数据"></a>基础数据</h2><ul>
<li><p><input checked="" disabled="" type="checkbox">  部门管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  用户管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  角色管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  基础数据维护</p>
</li>
</ul>
<h2 id="菜单管理"><a href="#菜单管理" class="headerlink" title="菜单管理"></a>菜单管理</h2><ul>
<li><p><input checked="" disabled="" type="checkbox">  菜单管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  动态表单</p>
</li>
<li><p><input disabled="" type="checkbox">  采集表</p>
</li>
</ul>
<h2 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h2><ul>
<li><p><input checked="" disabled="" type="checkbox">  功能权限</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  数据权限</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  流程管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  缓存管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  定时任务</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  系统参数</p>
</li>
</ul>
<h2 id="审计查询"><a href="#审计查询" class="headerlink" title="审计查询"></a>审计查询</h2><h2 id="系统监控"><a href="#系统监控" class="headerlink" title="系统监控"></a>系统监控</h2><ul>
<li><p><input checked="" disabled="" type="checkbox">  在线人员监控</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  日志管理</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  资源监控</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  服务状态</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  缓存状态</p>
</li>
</ul>
<h2 id="首页显示"><a href="#首页显示" class="headerlink" title="首页显示"></a>首页显示</h2><ul>
<li><p><input disabled="" type="checkbox">  待办事项</p>
</li>
<li><p><input disabled="" type="checkbox">  通知公告</p>
</li>
</ul>
<h2 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h2><ul>
<li><input checked="" disabled="" type="checkbox"> 国际化支持</li>
</ul>
<h2 id="开发者工具"><a href="#开发者工具" class="headerlink" title="开发者工具"></a>开发者工具</h2><ul>
<li><p><input checked="" disabled="" type="checkbox">  代码生成</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  大屏显示</p>
</li>
<li><p><input checked="" disabled="" type="checkbox">  报表制作</p>
</li>
</ul>
<h1 id="安装要求"><a href="#安装要求" class="headerlink" title="安装要求"></a>安装要求</h1><ol>
<li>java 21+</li>
<li>springboot 3.3.3.RELEASE</li>
<li>mysql 8+</li>
<li>npm 8+</li>
<li>node 20+</li>
</ol>
<h2 id="tag1-0-0"><a href="#tag1-0-0" class="headerlink" title="tag1.0.0"></a>tag1.0.0</h2><ol>
<li>java 8+</li>
<li>springboot 2.6.3.RELEASE</li>
<li>mysql 5.7.5+</li>
<li>npm 6.14.4+</li>
<li>node 16.13.1+</li>
</ol>
<h1 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h1><ol>
<li>git clone 当前项目到你喜欢的目录</li>
<li>用你喜欢的 ide 引入该项目，并加载好依赖</li>
<li>创建好数据库 database， 默认 money_making_machine_plus</li>
<li>启动项目: 后端运行com.z.server.BootStrapServerApplication， 前端进入z-ui-admin-vue3目录， 执行pnpm run dev(先构建)</li>
<li>访问<a href="http://localhost:4000，">http://localhost:4000，</a> 登录查看我们的成果， 用户/密码:admin/admin</li>
</ol>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="前后端分离部署"><a href="#前后端分离部署" class="headerlink" title="前后端分离部署"></a>前后端分离部署</h2><h2 id="前后端集中部署"><a href="#前后端集中部署" class="headerlink" title="前后端集中部署"></a>前后端集中部署</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Psingle</span><br></pre></td></tr></table></figure>

<h1 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h1><p>该项目使用 git 进行版本管理。您可以在 tags 参看当前可用版本。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/10/14/%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90-copyq/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/10/14/%E5%A5%BD%E7%89%A9%E6%8E%A8%E8%8D%90-copyq/" class="post-title-link" itemprop="url">CV高手是怎么炼成的?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-10-14 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-14T00:00:00+08:00">2024-10-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%BD%AF%E4%BB%B6/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>你平时都怎么复制粘贴的？是否每次都是复制一段粘贴一段？是否厌倦了每次只能复制粘贴一次的限制？那这篇文章就是为你量身订做的。</p>
<h1 id="CopyQ简介"><a href="#CopyQ简介" class="headerlink" title="CopyQ简介"></a>CopyQ简介</h1><p>CopyQ is clipboard manager – a desktop application which stores content of the system clipboard whenever it changes and allows to search the history and copy it back to the system clipboard or paste it directly to other applications.</p>
<p>CopyQ 是一款开源的、跨平台的剪贴板管理工具，它不仅存储系统剪贴板的内容，还允许用户搜索历史记录，并将所需内容复制回系统剪贴板或直接粘贴到其他应用程序。这就意味着，你可以一次性复制多份内容，然后在需要的时候统一粘贴，极大地提高了工作效率。</p>
<p>官方地址: <a target="_blank" rel="noopener" href="https://copyq.readthedocs.io/en/latest/">https://copyq.readthedocs.io/en/latest/</a></p>
<p>CopyQ支持Windows、macOS、Linux系统，无论你使用的是哪种操作系统，都能享受到它带来的便利。</p>
<h1 id="CopyQ的核心功能"><a href="#CopyQ的核心功能" class="headerlink" title="CopyQ的核心功能"></a>CopyQ的核心功能</h1><p>多格式支持：CopyQ不仅限于文本，还支持图片、HTML等多种格式，满足不同场景的需求。</p>
<p>历史记录管理：你可以轻松管理剪贴板的历史记录，进行搜索、筛选和排序，快速找到你需要的内容。</p>
<p>多标签页功能：通过标签页分类管理剪贴板内容，提高组织效率，更清晰。</p>
<p>标记置顶功能: 可以给复制的条目打一个醒目的标签，方便后续查找。也可以将常用的复制内容置顶，后续就不需要每次找到源头复制再去粘贴。</p>
<p>编辑和脚本功能：内置编辑器让你可以对复制的文本内容进行调整，而脚本功能则为高级用户提供了更多自定义的可能。</p>
<p>导出和备份：软件本身支持复制内容的导出备份，同时导出的内容还可以导入到软件中。基于这一点如果动手能力还可以，能做个定时工具，利用github，或者同步网盘做一个多平台同步，爽。</p>
<h1 id="实际应用案例"><a href="#实际应用案例" class="headerlink" title="实际应用案例"></a>实际应用案例</h1><p>编程开发：软件开发过程使用复制粘贴很频繁，不然也不会叫CV工程师了。如果有多段分隔开的代码要复制，平时都是复制粘贴一段，返回网站继续复制，循环往复。但是这样做很2,这里就可以使用CopyQ,一次复制完，然后到IDE中多次粘贴即可。</p>
<p>办公：比如经常用的word，excel，我们需要使用其中某些部分填充到新的文件中。此时我们可以直接将要使用的内容全部复制，然后到新的文件中按照需要多次粘贴即可。</p>
<p>笔记：一些经常使用的文字可以保存在CopyQ中，比如todo 、临时笔记等，使用时直接粘贴即可。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>这篇文章只是CopyQ的冰山一角，还有更多神奇的功能等待你去发现。三人行必有我师，如果你有其他提高效率的小技巧或工具，欢迎在评论区分享。</p>
<p>用效率工具，享牛马人生！</p>
<p>公众号: 陌上花kai</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/09/28/linux%E8%87%AA%E5%BB%BANAS%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/28/linux%E8%87%AA%E5%BB%BANAS%E6%95%99%E7%A8%8B/" class="post-title-link" itemprop="url">linux下自建NAS教程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2024-09-28T00:00:00+08:00">2024-09-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BD%AF%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">软件</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BD%AF%E4%BB%B6/NAS/" itemprop="url" rel="index"><span itemprop="name">NAS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么是NAS及为什么要用NAS"><a href="#什么是NAS及为什么要用NAS" class="headerlink" title="什么是NAS及为什么要用NAS"></a>什么是NAS及为什么要用NAS</h1><p>NAS，英文全名Network Attached Storage，翻译过来是:网络附接存储。</p>
<p>引用维基百科定义</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">网络附接存储（英语：Network Attached Storage，缩写：NAS）[1]是一种文件级（与块级存储相对）的计算机数据存储服务器，它连接到计算机网络，并提供对异构网络用户的数据访问。它专门用于通过其硬件、软件或配置来提供文件服务。它通常作为专门制造的专用计算机设备制造。 NAS系统是包含一个或多个通常排列成逻辑存储器、冗余存储器或RAID存储驱动器的网络设备。NAS消除了从网络上的其他服务器提供文件服务的负担，它们通常使用网络文件共享协议（如NFS、SMB或AFP）提供对文件的访问。</span><br></pre></td></tr></table></figure>

<p>上边说了一大堆，看着头疼。其实说直白一点，百度网盘大家都用过，可以直接存文件，看电影，放照片很方便对吧, 那么NAS也是干这事儿的。这里大家要问，那我百度2个T的宝贝为啥还要要用NAS呢? 这里就不得不说百度网盘及各种乱七八糟的网盘是很方便，但是有一个很大的缺点，那就是你的资源都掌握在别人手里(你懂得)，这时候NAS就体现了它的一个优势，数据都由你自己掌控。</p>
<h2 id="小白特供，NAS可以干什么"><a href="#小白特供，NAS可以干什么" class="headerlink" title="小白特供，NAS可以干什么"></a>小白特供，NAS可以干什么</h2><p>个人感觉最主要的几个场景，构建家庭影院，照片分享，文件备份。 同时因为其本身就是一个服务器，心情好你可以做个人博客。</p>
<h1 id="如何选择"><a href="#如何选择" class="headerlink" title="如何选择"></a>如何选择</h1><p>新手小白可以直接选择现成品牌即可，市面上用的比较多的有以下几个:</p>
<p>极空间：<a target="_blank" rel="noopener" href="https://tiyan.zspace.cn/">https://tiyan.zspace.cn/</a></p>
<p>群晖：<a target="_blank" rel="noopener" href="https://demo.synology.cn/zh-cn/dsm">https://demo.synology.cn/zh-cn/dsm</a></p>
<p>威联通：<a target="_blank" rel="noopener" href="https://www.qnap.com.cn/zh-cn/live-demo">https://www.qnap.com.cn/zh-cn/live-demo</a></p>
<p>爱速特：<a target="_blank" rel="noopener" href="https://www.asustor.com/zh-cn/live_demo">https://www.asustor.com/zh-cn/live_demo</a></p>
<p>可以参考他们的官网按照自己的心里价位购买即可，很easy</p>
<p>如果是老鸟(我是菜鸟)，就可以根据以前的使用经验，从硬件到软件统统考虑，然后再结合自己的心里价位去综合考虑。或者动手能力强，自己刷刷刷也不是不行。</p>
<h1 id="为什么要自建及优缺点"><a href="#为什么要自建及优缺点" class="headerlink" title="为什么要自建及优缺点"></a>为什么要自建及优缺点</h1><p>现在到了本文的重点，自建NAS。 那么为什么自建，且听我一一道来。</p>
<h2 id="成本效益："><a href="#成本效益：" class="headerlink" title="成本效益："></a>成本效益：</h2><p>自建NAS通常比购买现成的NAS系统更经济，只要你有台差不多的基本废弃不用的电脑，就可以自建。系统本身及需要的软件也是开源免费使用，四舍五入那就是不花钱。</p>
<h2 id="定制化"><a href="#定制化" class="headerlink" title="定制化"></a>定制化</h2><p>可以根据自己的需求定制硬件和软件，如果你觉得自己磁盘不够就可以随时加硬盘，软件不好用那就换软件，系统用腻了那就换系统，爽。</p>
<h2 id="上边都是优点，当然自建也是有缺点的"><a href="#上边都是优点，当然自建也是有缺点的" class="headerlink" title="上边都是优点，当然自建也是有缺点的"></a>上边都是优点，当然自建也是有缺点的</h2><p>没有开箱即用，很多东西需要自己学习，对于小白来说有点难。</p>
<p>稳定性可能不如现成的NAS。</p>
<p>UI没有现成的NAS看起来好看统一。</p>
<h1 id="如何自建"><a href="#如何自建" class="headerlink" title="如何自建"></a>如何自建</h1><h2 id="一台个人闲置电脑"><a href="#一台个人闲置电脑" class="headerlink" title="一台个人闲置电脑"></a>一台个人闲置电脑</h2><p>首先要有一台电脑，最好是台式机，小机箱也行，但是如果需要扩展多块硬盘还是大点好。其次是系统，我个人是使用archlinux习惯了，也可以使用其它发行版本。</p>
<h2 id="DLNA-UPnP家庭流媒体服务-jellyfin-KODI-播放器-家庭影院软件"><a href="#DLNA-UPnP家庭流媒体服务-jellyfin-KODI-播放器-家庭影院软件" class="headerlink" title="DLNA/UPnP家庭流媒体服务 jellyfin + KODI(播放器) 家庭影院软件"></a>DLNA/UPnP家庭流媒体服务 jellyfin + KODI(播放器) 家庭影院软件</h2><p><a target="_blank" rel="noopener" href="https://jellyfin.org/docs/general/installation/linux/">https://jellyfin.org/docs/general/installation/linux/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 启动</span><br><span class="line">systemctl start jellyfin.service</span><br><span class="line"># 访问, 按照自己设置的密码搞起即可</span><br><span class="line">http://127.0.0.1:8096</span><br></pre></td></tr></table></figure>

<h2 id="BT下载aria2"><a href="#BT下载aria2" class="headerlink" title="BT下载aria2"></a>BT下载aria2</h2><h2 id="Linux服务器web管理神器–Cockpit-作为服务资源监控管理工具使用"><a href="#Linux服务器web管理神器–Cockpit-作为服务资源监控管理工具使用" class="headerlink" title="Linux服务器web管理神器–Cockpit (作为服务资源监控管理工具使用)"></a>Linux服务器web管理神器–Cockpit (作为服务资源监控管理工具使用)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#启动</span><br><span class="line">systemctl start cockpit.service</span><br><span class="line"># 访问</span><br><span class="line">http://localhost:9091</span><br></pre></td></tr></table></figure>
<h2 id="照片查看-photoprism"><a href="#照片查看-photoprism" class="headerlink" title="照片查看 photoprism"></a>照片查看 photoprism</h2><p><a target="_blank" rel="noopener" href="https://docs.photoprism.app/user-guide/">https://docs.photoprism.app/user-guide/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.photoprism</span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line">#访问</span><br><span class="line">http://127.0.0.1:2342</span><br><span class="line"></span><br><span class="line">PhotoPrism 的默认用户名为 admin，密码为 insecure</span><br></pre></td></tr></table></figure>

<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><p>优势: 可以使用现有的存储路径，重建索引</p>
<p>缺点: 只有网页版</p>
<h2 id="网盘聚合alist-rclone-非必须"><a href="#网盘聚合alist-rclone-非必须" class="headerlink" title="网盘聚合alist + rclone(非必须)"></a>网盘聚合alist + rclone(非必须)</h2><p>可以通过该工具,直接在线访问网盘中视频,或者配合其它工具(rclone)通过webdav将网盘目录挂载到本地</p>
<p>windows下用RaiDrive替代rclone</p>
<h2 id="samba-Samba-SMB-文件共享服务-非必须"><a href="#samba-Samba-SMB-文件共享服务-非必须" class="headerlink" title="samba: Samba(SMB)文件共享服务(非必须)"></a>samba: Samba(SMB)文件共享服务(非必须)</h2><p>主要是用来跟win进行数据共享，如果有需要可以安装起来</p>
<h2 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h2><h3 id="视频播放-mxplayer-安卓-nplayer-ios"><a href="#视频播放-mxplayer-安卓-nplayer-ios" class="headerlink" title="视频播放 mxplayer(安卓) nplayer(ios)"></a>视频播放 mxplayer(安卓) nplayer(ios)</h3><h3 id="浏览器直接访问"><a href="#浏览器直接访问" class="headerlink" title="浏览器直接访问"></a>浏览器直接访问</h3><h1 id="交流"><a href="#交流" class="headerlink" title="交流"></a>交流</h1><p>欢迎关注公众号, 更方便查看文章</p>
<p>公众号: 陌上花kai</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/09/26/%E6%B5%8B%E8%AF%95blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/26/%E6%B5%8B%E8%AF%95blog/" class="post-title-link" itemprop="url">测试blog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-09-26 23:45:59" itemprop="dateCreated datePublished" datetime="2024-09-26T23:45:59+08:00">2024-09-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一个测试112</p>
<p>测试评论</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/09/26/%E4%B8%80%E4%B8%AA8%E5%B9%B4archlinux%E9%87%8D%E5%BA%A6%E4%BD%BF%E7%94%A8%E8%80%85%E8%87%AA%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/26/%E4%B8%80%E4%B8%AA8%E5%B9%B4archlinux%E9%87%8D%E5%BA%A6%E4%BD%BF%E7%94%A8%E8%80%85%E8%87%AA%E8%BF%B0/" class="post-title-link" itemprop="url">一个9年archlinux重度使用者自述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-09-26 21:50:40 / 修改时间：23:45:59" itemprop="dateCreated datePublished" datetime="2024-09-26T21:50:40+08:00">2024-09-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>系统没有高低贵贱,主要还是使用的人，哪个跟你更契合。对我而言, archlinux就是最契合的那个。本文主要是对archlinux使用做一个粗浅的介绍，如果能勾起你一丝兴趣，那就更好了。</p>
<h1 id="第一部分：初识Arch-Linux"><a href="#第一部分：初识Arch-Linux" class="headerlink" title="第一部分：初识Arch Linux"></a>第一部分：初识Arch Linux</h1><h2 id="从Ubuntu和Fedora到Arch的转变"><a href="#从Ubuntu和Fedora到Arch的转变" class="headerlink" title="从Ubuntu和Fedora到Arch的转变"></a>从Ubuntu和Fedora到Arch的转变</h2><p>大学期间了解到有linux这么一类系统，看起来很酷，那命令行操作神秘又高级，瞬间引起了我的兴趣。经过各种对比，选择了最容易上手的ubuntu发行版。使用中发现跟windown体验大不相同，很多东西都要从头学起，对于喜欢折腾的人来说真的是瞌睡给了个枕头。同时这个系统简直是游戏荒漠，使用这个系统又能帮助我远离游戏，一举多得。</p>
<p>大概使用一年多ubuntu后中间也接触了fedora但是也没什么吸引力，个人感觉也就是界面不同，包管理机制不同，没什么特殊的。直到我遇到了archlinux，搜索各种资料学习安装，说实话刚开始纯命令行安装真的很头大，就怕一步搞不对，但是折腾起来后，很有j成就感。瞬间感觉自己的水平上了一个档次。</p>
<h2 id="搜索与学习：如何克服初期困难"><a href="#搜索与学习：如何克服初期困难" class="headerlink" title="搜索与学习：如何克服初期困难"></a>搜索与学习：如何克服初期困难</h2><p>其实所有发行版都是基于同一个linux内核，大差不差，但是不同的发行版有各自的特色，archlinux就是让你可以更加自由的定制。如果是纯新手我建议不用想别的就是一直逼着自己用, 不会就去搜索，这个是必须要经历的，等过了这段时间就是海阔天空。</p>
<h1 id="第二部分：桌面环境的探索"><a href="#第二部分：桌面环境的探索" class="headerlink" title="第二部分：桌面环境的探索"></a>第二部分：桌面环境的探索</h1><h2 id="UNITY"><a href="#UNITY" class="headerlink" title="UNITY"></a>UNITY</h2><p>最初ubuntu模式使用unity桌面，那时候导航栏靠左显示，那叫一个帅气。</p>
<h2 id="GNOME"><a href="#GNOME" class="headerlink" title="GNOME"></a>GNOME</h2><p>fedora系统默认使用gnome桌面，这个桌面给我的第一感觉就是很绚，而且这套桌面环境自带了很多实用的功能，开箱即用，对新手很友好。</p>
<h2 id="XFCE"><a href="#XFCE" class="headerlink" title="XFCE"></a>XFCE</h2><p>如果你的电脑比较老旧，可以选用xfce，这个桌面环境麻雀虽小五脏俱全，占用资源很小而且足够用，不用太折腾。</p>
<h2 id="Openbox"><a href="#Openbox" class="headerlink" title="Openbox"></a>Openbox</h2><p>严格来说openbox并不算桌面环境，只能算是个桌面管理器，要构成一个完整的桌面需要自己去定制，如: panel栏:tint2，背景透明: xcompmgr，程序运行:albert，喇叭图标volumeicon，登录管理器:slim等。一段时间这是我的主力桌面，真的很快。</p>
<h2 id="i3wm"><a href="#i3wm" class="headerlink" title="i3wm"></a>i3wm</h2><p>一个偶然的机会听说有一种叫平铺的桌面环境，然后就结识了i3，跟openbox一样仅仅是个桌面管理器，一切都要自己去定制，包括桌面背景，导航栏，登录管理器等。感兴趣的道友可以去看看，新手不建议使用，容易劝退。</p>
<h1 id="第三部分：Arch-Linux的日常生活"><a href="#第三部分：Arch-Linux的日常生活" class="headerlink" title="第三部分：Arch Linux的日常生活"></a>第三部分：Arch Linux的日常生活</h1><h2 id="从不熟悉到离不开"><a href="#从不熟悉到离不开" class="headerlink" title="从不熟悉到离不开"></a>从不熟悉到离不开</h2><p>最开始因为对系统的不熟悉有很多问题，天天不是在搜索就是在搜索的路上，工作的事情一点没干都是在学怎么用系统了。随着时间的推移，很多坑也慢慢填平了，系统使用越来越熟练，很多工作在命令下操作会比界面操作效率高很多，现在让我换回windows真的很不习惯。</p>
<h2 id="日常工作与生活的便利"><a href="#日常工作与生活的便利" class="headerlink" title="日常工作与生活的便利"></a>日常工作与生活的便利</h2><p>在日常工作和生活中，Arch Linux的高效操作让我能够更快地完成任务。有一件印象深刻的事儿，刚毕业工作那会儿，有一次领导让整理几百个脚本文件,需要在每个脚本前边加上begin。作为一个”懒惰”的程序员，必须善用工具，使用sed命令分分钟搞定，当时那叫一个骄傲。</p>
<h1 id="第四部分：工作中的Arch-Linux"><a href="#第四部分：工作中的Arch-Linux" class="headerlink" title="第四部分：工作中的Arch Linux"></a>第四部分：工作中的Arch Linux</h1><h2 id="提高工作效率的秘诀"><a href="#提高工作效率的秘诀" class="headerlink" title="提高工作效率的秘诀"></a>提高工作效率的秘诀</h2><p>工作这么多年，大家一致觉得我的工作效率比较高，主要原因就在于这个系统，因为基本上是我自己定制出来的，对它更熟悉，使用起来当然得心应手。对于文本操作，软件开发，linux是有天然的优势，因为一切皆文件，很多时候文本操作会比图形界面快很多，比如开发环境搭建，文本有天然优势，可以做成工具一步到位。</p>
<h2 id="定制化系统以适应工作需求"><a href="#定制化系统以适应工作需求" class="headerlink" title="定制化系统以适应工作需求"></a>定制化系统以适应工作需求</h2><p>不论任何行业工作久了都会有自己的工具箱，我自己会把一些日常使用的东西配置都整理到一起，然后通过git版本控制，如果换新的机器，直接安装好后统一初始化，搞定。这个真的很舒服，要用起来。</p>
<h2 id="服务器管理的简便性"><a href="#服务器管理的简便性" class="headerlink" title="服务器管理的简便性"></a>服务器管理的简便性</h2><p>如果你是技术人员，日常中使用linux让你在面对生产服务器时也会更从容。 就相当与给你换了太电脑，仅此而已，so easy。</p>
<h1 id="第五部分：Arch-Linux的学习之道"><a href="#第五部分：Arch-Linux的学习之道" class="headerlink" title="第五部分：Arch Linux的学习之道"></a>第五部分：Arch Linux的学习之道</h1><h2 id="逼迫自己：持续使用的重要性"><a href="#逼迫自己：持续使用的重要性" class="headerlink" title="逼迫自己：持续使用的重要性"></a>逼迫自己：持续使用的重要性</h2><p>学会使用Arch Linux的最好方式就是逼迫自己一直使用它。</p>
<h2 id="实践出真知：通过实际操作学习"><a href="#实践出真知：通过实际操作学习" class="headerlink" title="实践出真知：通过实际操作学习"></a>实践出真知：通过实际操作学习</h2><p>系统就是要经常用，不要怕，用不坏的。</p>
<h2 id="社区资源：如何利用Arch-Linux社区"><a href="#社区资源：如何利用Arch-Linux社区" class="headerlink" title="社区资源：如何利用Arch Linux社区"></a>社区资源：如何利用Arch Linux社区</h2><p>大部分的问题在arch wiki都可以找到，系统安装了之类的不要看乱七八糟的地方，wiki足以。</p>
<p><a target="_blank" rel="noopener" href="https://archlinux.org/">https://archlinux.org/</a></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>Arch Linux的旅程充满了挑战，但也充满了乐趣。它不仅提高了我的技术能力，也锻炼了我的自制力。如果你也在寻找一个能够挑战自我、提高效率的Linux发行版，那么Arch Linux绝对是一个不错的选择。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/08/29/vim%E7%B3%BB%E5%88%97-%E6%8F%92%E4%BB%B6%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/29/vim%E7%B3%BB%E5%88%97-%E6%8F%92%E4%BB%B6%E7%AF%87/" class="post-title-link" itemprop="url">vim系列-插件篇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-29 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-29T00:00:00+08:00">2024-08-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vim插件管理器Vundle使用指南"><a href="#Vim插件管理器Vundle使用指南" class="headerlink" title="Vim插件管理器Vundle使用指南"></a>Vim插件管理器Vundle使用指南</h1><h2 id="Vundle简介"><a href="#Vundle简介" class="headerlink" title="Vundle简介"></a>Vundle简介</h2><p>Vundle是一个Vim插件管理器，它允许您：</p>
<ul>
<li>在<code>.vimrc</code>中跟踪和配置插件</li>
<li>安装配置的插件</li>
<li>更新插件</li>
<li>搜索所有可用的Vim脚本</li>
<li>清理未使用的插件</li>
<li>通过交互模式一键运行上述操作</li>
</ul>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="1-安装Vundle"><a href="#1-安装Vundle" class="headerlink" title="1. 安装Vundle"></a>1. 安装Vundle</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure>

<h3 id="2-配置vimrc-bundle"><a href="#2-配置vimrc-bundle" class="headerlink" title="2. 配置vimrc.bundle"></a>2. 配置<code>vimrc.bundle</code></h3><p>在<code>.vimrc</code>中添加以下内容，以使用Vundle：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">... 一堆配置</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">filereadable</span>(<span class="built_in">expand</span>(<span class="string">&quot;~/.vimrc.bundles&quot;</span>))</span><br><span class="line">    <span class="keyword">source</span> ~/.vimrc.bundles</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-安装插件"><a href="#3-安装插件" class="headerlink" title="3. 安装插件"></a>3. 安装插件</h3><p>在Vim中执行<code>:PluginInstall</code>来安装插件。</p>
<p>或者从命令行执行<code>vim +PluginInstall +qall</code>。</p>
<h3 id="4-（可选）对于使用fish-shell的用户"><a href="#4-（可选）对于使用fish-shell的用户" class="headerlink" title="4. （可选）对于使用fish shell的用户"></a>4. （可选）对于使用fish shell的用户</h3><p>在<code>.vimrc</code>中添加<code>set shell=/bin/bash</code>。</p>
<h2 id="好用的Vim插件"><a href="#好用的Vim插件" class="headerlink" title="好用的Vim插件"></a>好用的Vim插件</h2><h3 id="surround"><a href="#surround" class="headerlink" title="surround"></a>surround</h3><p>surround插件可以方便地添加、修改和删除包围符：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; 替换: cs&quot;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">&quot;Hello world!&quot; -&gt; &#x27;</span>Hello world!<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot; 替换-标签: cst&quot;</span></span><br><span class="line"><span class="string">&lt;a&gt;abc&lt;/a&gt;  -&gt; &quot;abc&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot; 添加: ysiw&quot;</span></span><br><span class="line"><span class="string">Hello -&gt; &quot;Hello&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot; 添加-整行: yss&quot;</span></span><br><span class="line"><span class="string">Hello world -&gt; &quot;Hello world&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot; 添加-当前到行尾: ys$&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="vim-repeat"><a href="#vim-repeat" class="headerlink" title="vim-repeat"></a>vim-repeat</h3><p>vim-repeat插件允许你重复一个插件的操作，例如surround.vim：</p>
<p>通过<code>.</code>号重复上一次操作。</p>
<h3 id="模糊搜索神器fzf"><a href="#模糊搜索神器fzf" class="headerlink" title="模糊搜索神器fzf"></a>模糊搜索神器fzf</h3><p>fzf是一个强大的模糊搜索工具，结合fzf.vim插件使用：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bundle <span class="string">&#x27;junegunn/fzf&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;junegunn/fzf.vim&#x27;</span></span><br></pre></td></tr></table></figure>

<p>在Vim中执行<code>:PlugInstall</code>安装插件。</p>
<p>需要安装<code>ripgrep</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S ripgrep</span><br></pre></td></tr></table></figure>

<h2 id="使用Vundle"><a href="#使用Vundle" class="headerlink" title="使用Vundle"></a>使用Vundle</h2><p>Vundle提供了多种命令来管理插件：</p>
<ul>
<li><code>:PluginList</code> - 列出配置的插件</li>
<li><code>:PluginInstall</code> - 安装插件</li>
<li><code>:PluginUpdate</code> - 更新插件</li>
<li><code>:PluginSearch</code> - 搜索插件</li>
<li><code>:PluginClean</code> - 清理未使用的插件</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; 把自定义的.vimrc.bundle文件引入到.vimrc中</span></span><br><span class="line"><span class="keyword">source</span> ~/.vimrc.bundle</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">复制molokai主题到你的vim目录</span></span><br><span class="line">cd ~/.vim &amp; cp -r bundle/molokai/colors .</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&quot; 更新所有插件</span></span><br><span class="line">:BundleUpdate</span><br></pre></td></tr></table></figure>

<h3 id="一份个人插件配置"><a href="#一份个人插件配置" class="headerlink" title="一份个人插件配置"></a>一份个人插件配置</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &amp;compatible</span><br><span class="line">  <span class="keyword">set</span> nocompatible</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="keyword">filetype</span> off</span><br><span class="line"><span class="keyword">set</span> rtp+=~/.<span class="keyword">vim</span>/bundle/Vundle.<span class="keyword">vim</span>/</span><br><span class="line"><span class="keyword">call</span> vundle#rc()</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Let Vundle manage Vundle</span></span><br><span class="line">Bundle <span class="string">&#x27;gmarik/vundle&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Define bundles via Github repos</span></span><br><span class="line">Bundle <span class="string">&quot;tomasr/molokai&quot;</span></span><br><span class="line">Bundle <span class="string">&#x27;vim-airline&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;jlanzarotta/bufexplorer&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;skammer/vim-css-color&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;mattn/emmet-vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;mbbill/fencview&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;tpope/vim-fugitive&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;tpope/vim-surround&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;tpope/vim-repeat&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;airblade/vim-gitgutter&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;nathanaelkane/vim-indent-guides&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;vim-scripts/JavaScript-Libraries-Syntax&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;scrooloose/nerdcommenter&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;scrooloose/nerdtree&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;edkolev/promptline.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;MarcWeber/vim-addon-mw-utils&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;tomtom/tlib_vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;garbas/vim-snipmate&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;scrooloose/syntastic&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;godlygeek/tabular&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;majutsushi/tagbar&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;tomtom/tlib_vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;vim-scripts/TxtBrowser&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;xsbeats/vim-blade&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;guns/vim-clojure-static&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;kchmck/vim-coffee-script&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;webfd/vim-cppstl&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;rhysd/vim-crystal&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;hail2u/vim-css3-syntax&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;OrangeT/vim-csharp&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;chrisbra/csv.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;JesseKPhillips/d.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;dart-lang/dart-vim-plugin&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;ekalinin/Dockerfile.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;elixir-lang/vim-elixir&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;jimenezrick/vimerl&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;kongo2002/fsharp-vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;fatih/vim-go&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;tfnico/vim-gradle&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;webfd/vim-haskell&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;jdonaldson/vaxe&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;othree/html5.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;digitaltoad/vim-jade&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;pangloss/vim-javascript&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;mitsuhiko/vim-jinja&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;jason0x43/vim-js-indent&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;leshill/vim-json&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;elzr/vim-json&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;mxw/vim-jsx&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;briancollins/vim-jst&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;JuliaLang/julia-vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;udalov/kotlin-vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;groenewege/vim-less&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;godlygeek/tabular&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;plasticboy/vim-markdown&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;mustache/vim-mustache-handlebars&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;evanmiller/nginx-vim-syntax&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;rgrinberg/vim-ocaml&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;vim-perl/vim-perl&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;exu/pgsql.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;shawncplus/phpcomplete.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;stephpy/vim-php-cs-fixer&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;2072/PHP-Indenting-for-VIm&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;me-vlad/python-syntax.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;wlangstroth/vim-racket&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;vim-ruby/vim-ruby&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;rust-lang/rust.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;derekwyatt/vim-scala&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;cakebaker/scss-syntax.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;slim-template/vim-slim.git&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;iakio/smarty3.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;keith/swift.vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;evidens/vim-twig&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;leafgarland/typescript-vim&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;tkztmk/vim-vala&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;vimwiki/vimwiki&#x27;</span></span><br><span class="line"><span class="comment">&quot;Bundle &#x27;xwsoul/vim-zephir&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;junegunn/fzf&#x27;</span></span><br><span class="line">Bundle <span class="string">&#x27;junegunn/fzf.vim&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">syntax</span> enable</span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">filereadable</span>(<span class="built_in">expand</span>(<span class="string">&quot;~/.vimrc.bundles.local&quot;</span>))</span><br><span class="line">  <span class="keyword">source</span> ~/.vimrc.bundles.local</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">filetype</span> <span class="keyword">on</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhaozhiwei1992.github.io/2024/08/29/vim%E7%B3%BB%E5%88%97-%E6%96%87%E6%9C%AC%E6%93%8D%E4%BD%9C%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Mr.zhao">
      <meta itemprop="description" content="show me your code">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离线de日常">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/29/vim%E7%B3%BB%E5%88%97-%E6%96%87%E6%9C%AC%E6%93%8D%E4%BD%9C%E7%AF%87/" class="post-title-link" itemprop="url">vim系列-文本操作篇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-29 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-29T00:00:00+08:00">2024-08-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vim实用技巧：文本编辑与处理"><a href="#Vim实用技巧：文本编辑与处理" class="headerlink" title="Vim实用技巧：文本编辑与处理"></a>Vim实用技巧：文本编辑与处理</h1><h2 id="基数行与偶数行分组"><a href="#基数行与偶数行分组" class="headerlink" title="基数行与偶数行分组"></a>基数行与偶数行分组</h2><p>使用Vim的替换命令，可以轻松地将基数行和偶数行分组：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%s/\(^.*$\)\n\(^.*$\)/\<span class="number">1</span> \<span class="number">2</span>/g</span><br></pre></td></tr></table></figure>
<p>然后，删除所有的基数行：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%s/^.*$\n\(^.*$\)/\<span class="number">1</span>/g</span><br></pre></td></tr></table></figure>

<h2 id="删除重复行"><a href="#删除重复行" class="headerlink" title="删除重复行"></a>删除重复行</h2><p>在Vim中删除重复行是一个常见的操作，以下是几种方法：</p>
<h3 id="删除相邻重复行"><a href="#删除相邻重复行" class="headerlink" title="删除相邻重复行"></a>删除相邻重复行</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:g/\(.\+\)$\n\<span class="number">1</span>/d</span><br></pre></td></tr></table></figure>

<h3 id="删除不相邻重复行"><a href="#删除不相邻重复行" class="headerlink" title="删除不相邻重复行"></a>删除不相邻重复行</h3><p>使用排序命令删除不相邻的重复行：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">sort</span> <span class="keyword">u</span></span><br></pre></td></tr></table></figure>

<h3 id="删除重复行，结果按照原顺序排列"><a href="#删除重复行，结果按照原顺序排列" class="headerlink" title="删除重复行，结果按照原顺序排列"></a>删除重复行，结果按照原顺序排列</h3><p>为了保存原有顺序，首先给每行加上行号和1个<code>&#123;</code>：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">let</span> i=<span class="number">1</span>|g/^/s//\=i.<span class="string">&#x27;&#123;&#x27;</span>/|<span class="keyword">let</span> i+=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>按照行号后面的内容排序：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">sort</span> /^\d\&#123;-&#125;/</span><br></pre></td></tr></table></figure>

<p>删除行号后面的内容相同的行保留后面的行：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:g/^\d\&#123;-&#125;\&#123;.∗$\n\d\&#123;-&#125;\&#123;<span class="number">1</span>$/d</span><br></pre></td></tr></table></figure>

<p>按照行号恢复顺序：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">sort</span> n</span><br></pre></td></tr></table></figure>

<h2 id="删除空白行"><a href="#删除空白行" class="headerlink" title="删除空白行"></a>删除空白行</h2><p>删除文件中的空白行：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%g/^\s*$/d</span><br></pre></td></tr></table></figure>

<h2 id="添加序号"><a href="#添加序号" class="headerlink" title="添加序号"></a>添加序号</h2><p>有多种方法可以为文本添加序号：</p>
<h3 id="通过let变量"><a href="#通过let变量" class="headerlink" title="通过let变量"></a>通过let变量</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i=<span class="number">1</span> | g/^/s//\=i.<span class="string">&#x27; &#x27;</span>/ | <span class="keyword">let</span> i=i+<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="直接使用行号"><a href="#直接使用行号" class="headerlink" title="直接使用行号"></a>直接使用行号</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:g/^/ s//\=<span class="built_in">line</span>(<span class="string">&#x27;.&#x27;</span>).<span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用range-函数"><a href="#使用range-函数" class="headerlink" title="使用range()函数"></a>使用range()函数</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">31</span>)</span><br><span class="line">:  <span class="keyword">call</span> <span class="built_in">setline</span>(i, i .<span class="string">&#x27; &#x27;</span>. <span class="built_in">getline</span>(i))</span><br><span class="line">:<span class="keyword">endfor</span></span><br></pre></td></tr></table></figure>

<h3 id="利用Vim的编程支持"><a href="#利用Vim的编程支持" class="headerlink" title="利用Vim的编程支持"></a>利用Vim的编程支持</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">python</span> &lt;&lt;EOF</span><br><span class="line">from <span class="keyword">vim</span> import current</span><br><span class="line"><span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="built_in">len</span>(current.<span class="keyword">buffer</span>)):</span><br><span class="line">    current.<span class="keyword">buffer</span>[i] = str(i+<span class="number">1</span>) + <span class="string">&#x27; &#x27;</span> + current.<span class="keyword">buffer</span>[i]</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="外部命令"><a href="#外部命令" class="headerlink" title="外部命令"></a>外部命令</h3><p>使用外部命令如<code>findstr</code>, <code>sed</code>, <code>diff</code>, <code>perl</code>, <code>python</code>等为文本添加序号：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:%!findstr /<span class="keyword">N</span> <span class="string">&quot;^&quot;</span></span><br><span class="line">:%!sed =|sed <span class="string">&quot;N;s/\n/ /&quot;</span></span><br><span class="line">:%!diff --<span class="built_in">line</span>-format=%dn%L % -</span><br><span class="line">:%!perl -<span class="keyword">pe</span> <span class="string">&quot;print ++$a . &#x27; &#x27;&quot;</span></span><br><span class="line">:%!python -<span class="keyword">c</span> <span class="string">&quot;import sys,fileinput as f;[sys.stdout.write(str(f.lineno())+a) for a in f.input()]&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="查看文件行数、列数、字符数及所占字节大小"><a href="#查看文件行数、列数、字符数及所占字节大小" class="headerlink" title="查看文件行数、列数、字符数及所占字节大小"></a>查看文件行数、列数、字符数及所占字节大小</h2><p>查看文件的行数、列数、字符数及所占字节大小：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g + <span class="symbol">&lt;Ctrl-g&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mr.zhao"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Mr.zhao</p>
  <div class="site-description" itemprop="description">show me your code</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zhaozhiwei1992" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhaozhiwei1992" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/p205/posts" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;p205&#x2F;posts" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>知乎</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/65f51bc73109" title="简书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;65f51bc73109" rel="noopener" target="_blank"><i class="fas fa-book-open fa-fw"></i>简书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/qq347061329" title="博客园 → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;qq347061329" rel="noopener" target="_blank"><i class="fab fa-blog fa-fw"></i>博客园</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/u012768510" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;u012768510" rel="noopener" target="_blank"><i class="fas fa-code fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhaozhiweishanxi@gmail.com" title="E-Mail → mailto:zhaozhiweishanxi@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.zhao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
